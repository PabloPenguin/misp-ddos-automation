# 🎨 MISP DDoS Dashboard - Frontend

A modern, cybersecurity-themed React dashboard for visualizing DDoS threat intelligence from MISP instances. Features interactive charts, responsive design, and TLP-compliant security filtering.

![React](https://img.shields.io/badge/React-18+-61DAFB)
![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue)
![Material-UI](https://img.shields.io/badge/Material--UI-5+-0081CB)
![Security](https://img.shields.io/badge/Security-TLP%20Compliant-red)

## 🚀 Quick Start

### Development
```bash
npm install
npm run dev
```
Visit: `http://localhost:3000/misp-ddos-automation/`

### Production Build
```bash
npm run build
npm run preview
```

## ✨ Features

### 🎨 Cybersecurity Theme
- **Black & Gold Color Scheme**: Professional SOC-friendly interface
- **High Contrast**: Optimal readability in security operations centers
- **Monospace Typography**: Technical aesthetic with Roboto Mono
- **Animated Effects**: Subtle glows and transitions for modern feel

### 📊 Interactive Charts
- **Threat Level Distribution**: Pie chart showing High/Medium/Low events
- **Attack Type Analysis**: Bar chart of DDoS attack vectors
- **Daily Events Timeline**: Line chart for trend analysis
- **TLP Classification**: Doughnut chart of security classifications

### 🔒 Security Features
- **TLP:RED Filtering**: Automatically excludes sensitive classified events
- **Data Sanitization**: XSS protection for all displayed content
- **Input Validation**: Client-side validation of all user inputs
- **Content Security Policy**: Protection against injection attacks

### 📱 Responsive Design
- **Mobile-First**: Optimized for all device sizes
- **Touch-Friendly**: Large tap targets for mobile interaction
- **Collapsible Navigation**: Drawer-based sidebar on mobile
- **Adaptive Charts**: Responsive visualizations that scale properly

## 🏗️ Architecture

### Technology Stack
```json
{
  "framework": "React 18",
  "language": "TypeScript 5",
  "ui_library": "Material-UI (MUI) 5",
  "charts": "Chart.js 4 + react-chartjs-2",
  "build_tool": "Vite 5",
  "routing": "React Router 6",
  "styling": "CSS-in-JS + Custom Theme"
}
```

### Component Structure
```
src/
├── components/
│   ├── Sidebar.tsx              # Navigation with cybersecurity theme
│   ├── Dashboard.tsx            # Main dashboard layout
│   ├── charts/
│   │   └── InteractiveCharts.tsx # Chart.js visualizations
│   └── common/                  # Reusable components
├── pages/
│   ├── Dashboard.tsx            # Dashboard page wrapper
│   ├── Events.tsx              # Events management page
│   └── Settings.tsx            # Configuration page
├── theme/
│   └── blackYellowTheme.ts     # Cybersecurity color scheme
├── services/
│   └── cachedDataService.ts    # Data loading and caching
└── types/
    └── index.ts                # TypeScript type definitions
```

## 🔧 Configuration

### Environment Variables
```bash
# Development (.env.development)
VITE_API_BASE_URL=http://localhost:3000
VITE_ENVIRONMENT=development
VITE_DEBUG=true

# Production (set by GitHub Actions)
VITE_API_BASE_URL=https://username.github.io/misp-ddos-automation
VITE_ENVIRONMENT=production
```

### Build Configuration
```typescript
// vite.config.ts
export default defineConfig({
  base: '/misp-ddos-automation/',  // GitHub Pages base path
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
  },
  server: {
    port: 3000,
    host: true
  }
});
```

## 📊 Data Flow

### Data Sources
1. **Static JSON Files**: Generated by CLI tools from MISP API
2. **GitHub Actions**: Automated data refresh every 30 minutes
3. **Local Cache**: Browser caching for performance
4. **Service Worker**: Offline support (future enhancement)

### Data Processing Pipeline
```
MISP Instance → CLI Tools → JSON Files → React App → Charts
      ↓              ↓           ↓            ↓          ↓
  Raw Events → Filter TLP → Sanitize → Load Data → Visualize
```

### Security Filtering
```typescript
// Automatic TLP:RED filtering
const filterSensitiveData = (events: MISPEvent[]) => {
  return events.filter(event => 
    !event.tags?.some(tag => 
      tag.name?.toLowerCase().includes('tlp:red')
    )
  );
};
```

## 🎨 Theme Customization

### Color Palette
```typescript
const cybersecurityPalette = {
  primary: {
    main: '#FFD700',        // Golden yellow
    dark: '#FFA500',        // Orange accent
    light: '#FFFF99',       // Light yellow
  },
  background: {
    default: '#1A1A1A',     // Near black
    paper: '#2A2A2A',       // Dark gray
  },
  text: {
    primary: '#FFFFFF',     // White text
    secondary: '#FFD700',   // Golden text
  }
};
```

### Typography
```typescript
const typography = {
  fontFamily: '"Roboto Mono", "Courier New", monospace',
  h1: { fontSize: '2.5rem', fontWeight: 700 },
  h2: { fontSize: '2rem', fontWeight: 600 },
  body1: { fontSize: '1rem', lineHeight: 1.6 },
};
```

### Component Overrides
```typescript
const componentOverrides = {
  MuiCard: {
    styleOverrides: {
      root: {
        background: 'linear-gradient(135deg, rgba(255,215,0,0.1) 0%, transparent 100%)',
        border: '1px solid rgba(255,215,0,0.3)',
        backdropFilter: 'blur(10px)',
      }
    }
  }
};
```

## 📱 Responsive Breakpoints

### Material-UI Breakpoints
```typescript
const breakpoints = {
  xs: 0,      // Mobile phones (portrait)
  sm: 600,    // Mobile phones (landscape) / Small tablets
  md: 900,    // Tablets / Small laptops
  lg: 1200,   // Laptops / Desktop monitors
  xl: 1536,   // Large desktop monitors
};
```

### Responsive Grid Layout
```typescript
<Grid container spacing={3}>
  <Grid item xs={12} sm={6} md={4} lg={3}>
    <StatCard />
  </Grid>
  <Grid item xs={12} md={8} lg={6}>
    <Chart />
  </Grid>
</Grid>
```

## 🔄 Development Workflow

### Available Scripts
```bash
npm run dev          # Start development server
npm run build        # Build for production
npm run preview      # Preview production build
npm run lint         # Run ESLint
npm run lint:fix     # Fix ESLint issues
npm run type-check   # TypeScript validation
npm run test         # Run unit tests
```

### Code Quality Tools
- **ESLint**: JavaScript/TypeScript linting
- **Prettier**: Code formatting
- **TypeScript**: Static type checking
- **Husky**: Git hooks for quality gates

### Pre-commit Hooks
```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "pre-push": "npm run type-check"
    }
  },
  "lint-staged": {
    "*.{ts,tsx}": ["eslint --fix", "prettier --write"]
  }
}
```

## 🚀 Deployment

### GitHub Pages
Automatically deployed via GitHub Actions:
```yaml
- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./webapp/frontend/dist
```

### Custom Domain (Optional)
Add `CNAME` file to `public/` directory:
```
your-domain.com
```

### Build Optimization
- **Code Splitting**: Automatic route-based splitting
- **Tree Shaking**: Remove unused code
- **Asset Optimization**: Compressed images and fonts
- **Bundle Analysis**: Monitor bundle size

## 🔧 Troubleshooting

### Common Issues

#### Development Server Won't Start
```bash
Error: EADDRINUSE: address already in use :::3000
```
**Solution**: Kill existing processes or change port:
```bash
# Kill existing processes
npx kill-port 3000

# Or change port
npm run dev -- --port 3001
```

#### Charts Not Rendering
```bash
Error: Canvas context is null
```
**Solutions**:
- Ensure Chart.js is properly imported
- Check if container has valid dimensions
- Verify chart data is properly formatted

#### Theme Not Applied
```bash
Warning: MUI theme provider not found
```
**Solution**: Wrap app in ThemeProvider:
```typescript
import { ThemeProvider } from '@mui/material/styles';
import { blackYellowTheme } from './theme/blackYellowTheme';

<ThemeProvider theme={blackYellowTheme}>
  <App />
</ThemeProvider>
```

#### Build Fails
```bash
Error: TypeScript compilation failed
```
**Solutions**:
- Run `npm run type-check` to see specific errors
- Fix TypeScript errors before building
- Ensure all dependencies are installed

### Performance Issues

#### Slow Chart Rendering
**Solutions**:
- Reduce data points for large datasets
- Implement virtualization for long lists
- Use `React.memo()` for expensive components
- Debounce resize events

#### Memory Leaks
**Solutions**:
- Clean up event listeners in `useEffect` cleanup
- Cancel pending requests in component cleanup
- Use `AbortController` for fetch requests

## 📊 Analytics & Monitoring

### Performance Metrics
Monitor these key metrics:
- **First Contentful Paint (FCP)**: < 1.5s
- **Largest Contentful Paint (LCP)**: < 2.5s
- **Cumulative Layout Shift (CLS)**: < 0.1
- **Time to Interactive (TTI)**: < 3.5s

### Error Monitoring
```typescript
// Error boundary for production
class ErrorBoundary extends Component {
  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Log to monitoring service
    console.error('Dashboard error:', error, errorInfo);
  }
}
```

### Usage Analytics
```typescript
// Track user interactions
const trackEvent = (action: string, category: string) => {
  // Analytics implementation
  console.log(`Action: ${action}, Category: ${category}`);
};
```

## 🔒 Security Considerations

### Content Security Policy
```http
Content-Security-Policy: 
  default-src 'self';
  script-src 'self' 'unsafe-inline';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  connect-src 'self' https://api.github.com;
```

### Data Sanitization
```typescript
import DOMPurify from 'dompurify';

const sanitizeUserData = (data: unknown): string => {
  return DOMPurify.sanitize(String(data));
};
```

### Environment Security
- Never commit `.env` files with secrets
- Use GitHub Secrets for sensitive environment variables
- Validate all props and API responses
- Implement proper error boundaries

## 🤝 Contributing

### Development Setup
1. Fork and clone the repository
2. Install dependencies: `npm install`
3. Start development server: `npm run dev`
4. Make changes and test thoroughly
5. Run quality checks: `npm run lint && npm run type-check`
6. Submit pull request with clear description

### Component Development Guidelines
- Use TypeScript for all components
- Implement proper prop validation
- Follow Material-UI design patterns
- Add comprehensive error handling
- Include unit tests for complex logic
- Document component props and usage

### Code Review Checklist
- [ ] TypeScript compilation passes
- [ ] All linting rules followed
- [ ] Components are properly typed
- [ ] No console.log statements in production code
- [ ] Responsive design tested on multiple devices
- [ ] Accessibility guidelines followed
- [ ] Security best practices implemented

---

## 📞 Support

For frontend-specific issues:
1. Check the troubleshooting section above
2. Review browser console for errors
3. Test with latest Chrome/Firefox/Safari
4. Verify data files are properly generated
5. Check GitHub Actions workflow status

**Security Issues**: Report through proper security channels, not public issues.

---

**🏆 Dashboard Features:**
- Professional cybersecurity theme
- Interactive threat intelligence visualizations  
- Mobile-responsive design
- TLP-compliant security filtering
- Real-time data updates via GitHub Actions